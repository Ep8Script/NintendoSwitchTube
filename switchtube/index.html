<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Nintendo SwitchTube</title>
		<script src="jquery.min.js"></script>
		<script src="gamepad.js"></script>
		<script src="https://apis.google.com/js/client.js?onload=googleApiClientReady"></script>
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-112999876-1"></script>
		<script>
			  var GoogleAuth;
			  var clientToken;
			  var SCOPE = 'https://www.googleapis.com/auth/youtube';
			  function handleClientLoad() {
			    gapi.load('client:auth2', initClient);
			  }

			  function initClient() {
			    gapi.client.init({
			        'apiKey': key,
			        'clientId': '326112653788-6oa7ejsc9dgproj8slirnlj9rm9aoapa.apps.googleusercontent.com',
			        'scope': SCOPE
			    }).then(function () {
			      GoogleAuth = gapi.auth2.getAuthInstance();

			      GoogleAuth.isSignedIn.listen(updateSigninStatus);

			      // Handle initial sign-in state. (Determine if user is already signed in.)
			      var user = GoogleAuth.currentUser.get();
			      setSigninStatus();

			      // Call handleAuthClick function when user clicks on
			      //      "Sign In/Authorize" button.
			      $('#sign-in-or-out-button').click(function() {
			        handleAuthClick();
			      }); 
			    });
			  }

			  function handleAuthClick() {
			    if (GoogleAuth.isSignedIn.get()) {
			      // User is authorized and has clicked 'Sign out' button.
			      GoogleAuth.signOut();
				  $(".user_image").remove();
			    } else {
			      // User is not signed in. Start Google auth flow.
			      GoogleAuth.signIn();
			    }
			  }

			  function setSigninStatus(isSignedIn) {
			    var user = GoogleAuth.currentUser.get();
				
				
			    var isAuthorized = user.hasGrantedScopes(SCOPE);
			    if (isAuthorized) {
			      $('#sign-in-or-out-button').html('Sign out');
			      $('#auth-status').html("You are currently signed in as "+user.w3.ig+". (<a href='#' onclick='myChannel()'>My Channel</a>)");
			      clientToken = user.Zi.access_token;
				  $('<img class="user_image" src="'+user.w3.Paa+'">').prependTo("#yt-authorize");
			    } else {
			      $('#sign-in-or-out-button').html('Sign in');
			      $('#auth-status').html("Sign in to authorize your YouTube account with SwitchTube.");
			    }
			  }

			  function updateSigninStatus(isSignedIn) {
			    setSigninStatus();
			  }
		</script>
		<script src="app.js"></script>
		<link href="img/fav.ico" rel="shortcut icon" type="image/x-icon">
		<link href="style.css" rel="stylesheet">
	</head>
	
	<body>
		<div class="remove" id="yt-authorize">
			<button id="sign-in-or-out-button" style="margin-left: 25px">Sign in</button>
			<div id="auth-status" style="display: inline; padding-left: 25px"></div><hr>
		</div>
		<div id="fb-root"></div>
		<div class="container">
			<a id="logo-link" href="https://sites.google.com/site/ytnintendoswitch/" target="_top" style="top: 30px; margin-left: 285px; position: relative;">
				<img alt="SwitchTube" src="img/SwitchTube.png" style="height: 120px;">
			</a>
			<div class="jumbotron">
				<div class="input-append">
					<form id="vidID" onsubmit="return VID()">
						<input class="span5 get-video" autocomplete="off" id="videourl" type="text" placeholder="Enter YouTube Video ID">
						<input class="btn btn-success" id="url-submit" type="submit" value="Load" />
					</form>
				</div>
				<p class="example">Example: f5uik5fgIaI</p>
			</div>
			<div class="row-fluid" id="custom" style="display:none;">
				<div class="span12" style="text-align:center;">
					<div id="ytvideo" style="margin:20px;">
					</div>   
				</div>
			</div>
			<div class="jumbotron" id="or-search">
				<h2>or:</h2>
				<div class="input-append">
					<select id="search-type">
						<option value="video">Videos</option>
						<option value="channel">Channels</option>
					</select>
					<label>
						<br>
						<form id="search-yt" onsubmit="return keyWordsearch()">
							<input autocomplete="off" id="query" placeholder="Search" type="text"/>
							<input class="btn btn-success" id="search-button" type="submit" value="Search" />
						</form>
					</label>    
				</div>
				<div id="container">
					<h3 id="search-results"></h3>
					<ul id="results"></ul>
				</div>
			</div>
		</div>
		<div style="text-align: center;">
			Created by Ep8Script<br>
			<a href="https://gbatemp.net/threads/tool-website-for-watching-most-youtube-videos-on-the-switch.494796/" target="_top">GBATemp</a> | <a href="https://github.com/Ep8Script/NintendoSwitchTube/" target="_top">Source</a>
			<br>
			<a class="give-feedback" href="javascript:$('.feedback-form').show();">SEND FEEDBACK</a>
			<div class="feedback-form" style="display: none;">
				<h3>Feedback Form</h3>
				<p>Hello! In the form below, feel free to give me some suggestions to add<br> to this website that might help you out, or simply let me know what you think of it!<br> Anything is welcome, and thank you for using my website!</p>
				<form id="feedback" onsubmit="return sendFeedback()">
					<input autocomplete="off" id="feedback-name" type="text" placeholder="Name">
					<br>
					<textarea id="feedback-message" placeholder="Leave your feedback message here!" rows="6" style="width:30%; height: auto;"></textarea>
					<br>
					<input class="btn btn-success" id="send-feedback" type="submit" value="Send" />
				</form>
			</div>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script async defer src="https://apis.google.com/js/api.js" onload="this.onload=function(){};handleClientLoad()" onreadystatechange="if (this.readyState === 'complete') this.onload()"></script>
	</body>
</html>
